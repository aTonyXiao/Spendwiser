<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>components/cards/YourCards.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav class="nav">
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="Account.html">Account</a></li></ul><h3>Modules</h3><ul><li><a href="module-DisplayCard.html">DisplayCard</a></li><li><a href="module-LoadingScreen.html">LoadingScreen</a></li><li><a href="module-YourCards.html">YourCards</a></li></ul><h3>Classes</h3><ul><li><a href="BaseBackend.html">BaseBackend</a><ul class='methods'><li data-type='method'><a href="BaseBackend.html#dbAdd">dbAdd</a></li><li data-type='method'><a href="BaseBackend.html#dbAddEncrypted">dbAddEncrypted</a></li><li data-type='method'><a href="BaseBackend.html#dbDoesDocExist">dbDoesDocExist</a></li><li data-type='method'><a href="BaseBackend.html#dbGet">dbGet</a></li><li data-type='method'><a href="BaseBackend.html#dbGetEncrypted">dbGetEncrypted</a></li><li data-type='method'><a href="BaseBackend.html#dbGetSubCollections">dbGetSubCollections</a></li><li data-type='method'><a href="BaseBackend.html#dbSet">dbSet</a></li><li data-type='method'><a href="BaseBackend.html#dbSetEncrypted">dbSetEncrypted</a></li><li data-type='method'><a href="BaseBackend.html#doesSupportDatabase">doesSupportDatabase</a></li><li data-type='method'><a href="BaseBackend.html#enableDatabaseCaching">enableDatabaseCaching</a></li><li data-type='method'><a href="BaseBackend.html#getLoginProviders">getLoginProviders</a></li><li data-type='method'><a href="BaseBackend.html#getTimestamp">getTimestamp</a></li><li data-type='method'><a href="BaseBackend.html#getUserID">getUserID</a></li><li data-type='method'><a href="BaseBackend.html#getUserInfo">getUserInfo</a></li><li data-type='method'><a href="BaseBackend.html#initializeApp">initializeApp</a></li><li data-type='method'><a href="BaseBackend.html#onAuthStateChange">onAuthStateChange</a></li><li data-type='method'><a href="BaseBackend.html#resetPassword">resetPassword</a></li><li data-type='method'><a href="BaseBackend.html#setPrivateKey">setPrivateKey</a></li><li data-type='method'><a href="BaseBackend.html#signIn">signIn</a></li><li data-type='method'><a href="BaseBackend.html#signOut">signOut</a></li><li data-type='method'><a href="BaseBackend.html#signUp">signUp</a></li><li data-type='method'><a href="BaseBackend.html#userLoggedIn">userLoggedIn</a></li></ul></li><li><a href="FacebookLogin.html">FacebookLogin</a></li><li><a href="FirebaseBackend.html">FirebaseBackend</a><ul class='methods'><li data-type='method'><a href="FirebaseBackend.html#dbAdd">dbAdd</a></li><li data-type='method'><a href="FirebaseBackend.html#dbDelete">dbDelete</a></li><li data-type='method'><a href="FirebaseBackend.html#dbDoesDocExist">dbDoesDocExist</a></li><li data-type='method'><a href="FirebaseBackend.html#dbGet">dbGet</a></li><li data-type='method'><a href="FirebaseBackend.html#dbGetSubCollections">dbGetSubCollections</a></li><li data-type='method'><a href="FirebaseBackend.html#dbSet">dbSet</a></li><li data-type='method'><a href="FirebaseBackend.html#doesSupportDatabase">doesSupportDatabase</a></li><li data-type='method'><a href="FirebaseBackend.html#enableDatabaseCaching">enableDatabaseCaching</a></li><li data-type='method'><a href="FirebaseBackend.html#getLoginProviders">getLoginProviders</a></li><li data-type='method'><a href="FirebaseBackend.html#getTimestamp">getTimestamp</a></li><li data-type='method'><a href="FirebaseBackend.html#getUserID">getUserID</a></li><li data-type='method'><a href="FirebaseBackend.html#getUserInfo">getUserInfo</a></li><li data-type='method'><a href="FirebaseBackend.html#initializeApp">initializeApp</a></li><li data-type='method'><a href="FirebaseBackend.html#onAuthStateChange">onAuthStateChange</a></li><li data-type='method'><a href="FirebaseBackend.html#resetPassword">resetPassword</a></li><li data-type='method'><a href="FirebaseBackend.html#signIn">signIn</a></li><li data-type='method'><a href="FirebaseBackend.html#signOut">signOut</a></li><li data-type='method'><a href="FirebaseBackend.html#signUp">signUp</a></li><li data-type='method'><a href="FirebaseBackend.html#userLoggedIn">userLoggedIn</a></li></ul></li><li><a href="GoogleLogin.html">GoogleLogin</a></li><li><a href="LoginAuthorizer.html">LoginAuthorizer</a><ul class='methods'><li data-type='method'><a href="LoginAuthorizer.html#login">login</a></li></ul></li><li><a href="userClass.html">userClass</a><ul class='methods'><li data-type='method'><a href="userClass.html#addUser">addUser</a></li><li data-type='method'><a href="userClass.html#deleteCard">deleteCard</a></li><li data-type='method'><a href="userClass.html#getAllTransactions">getAllTransactions</a></li><li data-type='method'><a href="userClass.html#getCards">getCards</a></li><li data-type='method'><a href="userClass.html#getRewards">getRewards</a></li><li data-type='method'><a href="userClass.html#getTransactionsForCard">getTransactionsForCard</a></li><li data-type='method'><a href="userClass.html#getUserId">getUserId</a></li><li data-type='method'><a href="userClass.html#saveCardToUser">saveCardToUser</a></li><li data-type='method'><a href="userClass.html#saveTransactionToUser">saveTransactionToUser</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">components/cards/YourCards.js</h1>
    

    <!--container.tmpl-->




    <!--source.tmpl-->

    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React from 'react';
import { SafeAreaView, ScrollView, StyleSheet, View, Text, Modal, TouchableOpacity } from 'react-native';
import { Card } from './Card';
import { user } from '../../network/user';
import { useState, useEffect } from "react";
import { Ionicons } from '@expo/vector-icons';
import { Footer } from '../util/Footer';

/**
 * Display all of the credit cards associated with a user's account in a scrollable and selectable view. 
 * Shows each credit card's name and a picture of the card. If not card image is found, a gradient/colorized
 * image will be displayed instead.
 * 
 * @param {{Object, Object}} obj - The route and navigation passed directly to display card
 * @param {Object} obj.route - routing object containing information about a specific store
 * @param {Object} obj.navigation - navigation object used to move between different pages
 * @module YourCards
 */
function YourCards({route, navigation}) { 
    const [cards, setCards] = useState([]);
    const userId = user.getUserId();
    const [modalVisible, setModalVisible] = useState(false);
    const storeInformation = route.params.storeInformation;

    useEffect(() => {
        const unsubscribe = navigation.addListener('focus', () => {
            /* triggered on a reload of the page */
            loadCards(userId);
        });
        return unsubscribe;
    }, [navigation]);

    loadCards = () => {
        /* Make sure we aren't displaying any previous card lists */
        setCards([]);

        user.getCards(userId).then((cards) => {
            setCards(cards);
        })
    };

    // TODO: make this modal a component
    if (cards.length == 0) {
        return (
            &lt;View style={{ marginTop: 10 }}>
                &lt;View style={styles.bodyContainer}>
                    &lt;Modal
                        animationType="slide"
                        transparent={true}
                        visible={modalVisible}
                        onRequestClose={() => {
                            Alert.alert("Modal has been closed.");
                            setModalVisible(!modalVisible);
                        }}
                    >
                        &lt;View style={modalStyles.modalCenteredView}>
                            &lt;View style={modalStyles.modalView}>
                                &lt;View style={modalStyles.modalHeader}>
                                    &lt;TouchableOpacity onPress={() => setModalVisible(false)}>
                                        &lt;Ionicons
                                            name="close-circle-outline"
                                            color="black"
                                            size={26}
                                        >&lt;/Ionicons>
                                    &lt;/TouchableOpacity>
                                &lt;/View>

                                &lt;View style={modalStyles.modalBody}>
                                    &lt;Text style={modalStyles.modalTitle}>Add New Card&lt;/Text>
                                    &lt;TouchableOpacity
                                        onPress={() => {
                                            setModalVisible(!modalVisible);
                                            navigation.navigate('AddCardDB');
                                        }}
                                        style={modalStyles.modalText}
                                    >
                                        &lt;Text>By Search&lt;/Text>
                                    &lt;/TouchableOpacity>

                                    &lt;TouchableOpacity
                                        onPress={() => {
                                            setModalVisible(!modalVisible);
                                            navigation.navigate('AddCardCamera');
                                        }}
                                        style={modalStyles.modalText}
                                    >
                                        &lt;Text>By Camera&lt;/Text>
                                    &lt;/TouchableOpacity>

                                    &lt;TouchableOpacity
                                        onPress={() => {
                                            setModalVisible(!modalVisible);
                                            navigation.navigate('AddCardManual');
                                        }}
                                        style={modalStyles.modalTextBottom}
                                    >
                                        &lt;Text>Manually&lt;/Text>
                                    &lt;/TouchableOpacity>
                                &lt;/View>
                            &lt;/View>
                        &lt;/View>
                    &lt;/Modal>


                    &lt;View style={styles.addButton}>
                        &lt;TouchableOpacity onPress={() => setModalVisible(true)}>
                            &lt;Ionicons
                                name="add-circle-outline"
                                color="black"
                                size={32}
                            >&lt;/Ionicons>
                        &lt;/TouchableOpacity>
                    &lt;/View>

                    &lt;Text style={{ marginTop: 40, fontSize: 18 }}>You currently have no stored cards!&lt;/Text>
                &lt;/View>
            &lt;/View>
        )
    }

    return (
        &lt;SafeAreaView style={styles.container}>
            &lt;View style={styles.bodyContainer}>
                &lt;Modal
                    animationType="slide"
                    transparent={true}
                    visible={modalVisible}
                    onRequestClose={() => {
                        Alert.alert("Modal has been closed.");
                        setModalVisible(!modalVisible);
                    }}
                >
                    &lt;View style={modalStyles.modalCenteredView}>
                        &lt;View style={modalStyles.modalView}>
                            &lt;View style={modalStyles.modalHeader}>
                                &lt;TouchableOpacity onPress={() => setModalVisible(false)}>
                                    &lt;Ionicons
                                        name="close-circle-outline"
                                        color="black"
                                        size={26}
                                    >&lt;/Ionicons>
                                &lt;/TouchableOpacity>
                            &lt;/View>

                            &lt;View style={modalStyles.modalBody}>
                                &lt;Text style={modalStyles.modalTitle}>Add New Card&lt;/Text>
                                &lt;TouchableOpacity
                                    onPress={() => {
                                        setModalVisible(!modalVisible);
                                        navigation.navigate('AddCardDB');
                                    }}
                                    style={modalStyles.modalText}
                                >
                                    &lt;Text>By Search&lt;/Text>
                                &lt;/TouchableOpacity>

                                &lt;TouchableOpacity
                                    onPress={() => {
                                        setModalVisible(!modalVisible);
                                        navigation.navigate('AddCardCamera');
                                    }}
                                    style={modalStyles.modalText}
                                >
                                    &lt;Text>By Camera&lt;/Text>
                                &lt;/TouchableOpacity>

                                &lt;TouchableOpacity
                                    onPress={() => {
                                        setModalVisible(!modalVisible);
                                        navigation.navigate('AddCardManual');
                                    }}
                                    style={modalStyles.modalTextBottom}
                                >
                                    &lt;Text>Manually&lt;/Text>
                                &lt;/TouchableOpacity>
                            &lt;/View>
                        &lt;/View>
                    &lt;/View>
                &lt;/Modal>
                &lt;View style={styles.addButton}>
                    &lt;TouchableOpacity onPress={() => setModalVisible(true)}>
                        &lt;Ionicons
                            name="add-circle-outline"
                            color="black"
                            size={32}
                        >&lt;/Ionicons>
                    &lt;/TouchableOpacity>
                &lt;/View>

                &lt;ScrollView style={styles.scrollView}>
                    &lt;View>
                        {cards.map((card, i) => {
                            var props = {
                                navigation: navigation,
                                card: card,
                                storeInformation: storeInformation
                            }
                            return &lt;Card key={i.toString()} props={props} />
                        })}
                    &lt;/View>

                    {/* Below is empty height at bottom of scrollview becuase absolute footer cuts it off */}
                    &lt;View style={{height:100}}>&lt;/View>
                &lt;/ScrollView>
            &lt;/View>

            &lt;View style={styles.footerContainer}>
                &lt;Footer navigation={navigation} />
            &lt;/View>
        &lt;/SafeAreaView>
    );
}


const styles = StyleSheet.create({
    container : {
        flex: 1,
        backgroundColor: 'white',
        height: '100%',
        display: 'flex',
        justifyContent: 'space-between', 
    },
    bodyContainer: {
        justifyContent: 'center',
        alignItems: 'center'
    },
    scrollView: {
        width: "95%"
    },
    addButton: {
        borderRadius: 100,
        padding: 5,
        alignSelf: 'flex-end',
        margin: 8,
        marginBottom: 0
    },
    footerContainer: { 
        width: '100%',
        backgroundColor: 'white',
        position: 'absolute', 
        bottom: 0, 
        paddingBottom: 15,
        marginTop: 0
    }
});


const modalStyles = StyleSheet.create({
    modalCenteredView: {
        flex: 1,
        justifyContent: 'center',
        alignItems: 'stretch',
        marginTop: 22,
        padding: 22,
        backgroundColor: 'rgba(128, 128, 128, 0.5)'
    },
    modalView: {
        backgroundColor: 'white',
        justifyContent: 'center',
        alignItems: 'stretch',
        borderRadius: 4,
        borderColor: 'rgba(0, 0, 0, 0.1)',
    },
    modalHeader: { 
        margin: 8
    },
    modalBody: { 
        alignItems: 'center'
    },
    modalText: {
        color: 'black',
        margin: 5,
        backgroundColor: '#28b573',
        padding: 5,
        borderRadius: 5,
        borderWidth: 1,
        borderColor: '#28b573'
    },
    modalTextBottom: {
        color: 'black',
        margin: 5,
        marginBottom: 15,
        backgroundColor: '#28b573',
        padding: 5,
        borderRadius: 5,
        borderWidth: 1,
        borderColor: '#28b573'
    },
    modalTitle: { 
        fontSize: 24, 
        color: 'black',
        margin: 10, 
        marginTop: -26
    },
});

export {YourCards};</code></pre>
        </article>
    </section>





</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> on Sun Mar 07 2021 11:11:43 GMT-0800 (Pacific Standard Time) using the LOKE theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
